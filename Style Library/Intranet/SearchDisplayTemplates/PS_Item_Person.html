<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>PS Item Person</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:MasterPageDescription msdt:dt="string">Displays the default result item template.</mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106603</mso:ContentTypeId>
<mso:TargetControlType msdt:dt="string">;#SearchResults;#</mso:TargetControlType>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
<mso:ManagedPropertyMapping msdt:dt="string">'PSPersonAccountName':'PSPersonAccountName','PSPersonFirstName':'PSPersonFirstName','PSPersonLastName':'PSPersonLastName','PSPersonFullName':'PSPersonFullName','PSPersonSalutation':'PSPersonSalutation','PSPersonPreferredName':'PSPersonPreferredName','PSPersonPreferredPhone':'PSPersonPreferredPhone','PSPersonEmail':'PSPersonEmail','PSPersonAlternativeEmail':'PSPersonAlternativeEmail','PSPersonMobileNumber':'PSPersonMobileNumber','PSPersonParty':'PSPersonParty','PSPersonJobTitle':'PSPersonJobTitle','PSPersonPhone':'PSPersonPhone','PSPersonOrganisation':'PSPersonOrganisation','PSPersonBusinessGroup':'PSPersonBusinessGroup','PSPersonBusinessUnit':'PSPersonBusinessUnit','PSPersonLocation':'PSPersonLocation','PSPersonMemberOffice':'PSPersonMemberOffice','PSPersonRole':'PSPersonRole','PSPersonPortfolio':'PSPersonPortfolio','PSPersonPhotoUrl':'PSPersonPhotoUrl','PSPersonId':'PSPersonId','PSPersonPreferredFullName':'PSPersonPreferredFullName','HitHighlightedProperties':'HitHighlightedProperties','HitHighlightedSummary':'HitHighlightedSummary','PSPeopleOrganisation':'PSPeopleOrganisation','MobilePhone':'MobilePhone'</mso:ManagedPropertyMapping>
<mso:_dlc_DocId msdt:dt="string">OURHOUSE-2-2368</mso:_dlc_DocId>
<mso:_dlc_DocIdItemGuid msdt:dt="string">3a4f9df5-4494-4a0d-88fd-febee6f6702a</mso:_dlc_DocIdItemGuid>
<mso:_dlc_DocIdUrl msdt:dt="string">http://ourhouse.campus.services/_layouts/15/DocIdRedir.aspx?ID=OURHOUSE-2-2368, OURHOUSE-2-2368</mso:_dlc_DocIdUrl>
<mso:HtmlDesignStatusAndPreview msdt:dt="string">http://ourhouse.campus.services/_catalogs/masterpage/Display%20Templates/Search/PS_Item_Person.html, Conversion successful.</mso:HtmlDesignStatusAndPreview>
<mso:HtmlDesignConversionSucceeded msdt:dt="string">True</mso:HtmlDesignConversionSucceeded>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
    <body>
        <script>
            //$includeCSS(this.url,"~/Style Library/Intranet/CSS/CSS/Peoplesearch.css");
            $includeCSS(this.url, "../../../../Style Library/Intranet/CSS/Peoplesearch.css");
        </script>

        <div id="Item_Person">
            <!--#_
              if(!$isNull(ctx.CurrentItem) && !$isNull(ctx.ClientControl)){
              var id = ctx.ClientControl.get_nextUniqueId();
              var itemId = id + Srch.U.Ids.item;
              var hoverId = id + Srch.U.Ids.hover;
              $setResultItem(itemId, ctx.CurrentItem);
              var container_id = id + "_peopleContainer";

              var accountName = ctx.CurrentItem.PSPersonAccountName;
              var personid = ctx.CurrentItem.PSPersonId;
              var encodedPath = $urlHtmlEncode(location.protocol + '//' + location.hostname + "/pages/userprofile.aspx?personid=" + personid);
              var delimiter = "";
              var userPersonaId = $htmlEncode(id) + "_peopleUserPersona";
              var hoverUrl = "~sitecollection/_catalogs/masterpage/Display Templates/Search/PS_Item_Person_HoverPanel.js";

              //Split multi value variables

              function identical(array) {
              for(var i = 0; i < array.length - 1; i++) {
              if(array[i] != array[i+1]) {
              return false;
              }
              }
              return true;
              }

              function printJobTitle(jobTitleProperty){

              var jobTitleArray = jobTitleProperty.split(';');

              if(jobTitleArray.length > 1){
              if(identical(jobTitleArray)){
              jobTitleProperty = jobTitleArray[0];
              }
              else{
              jobTitleProperty= "Multiple roles, please view profile";
              }
              }
              return jobTitleProperty;
              }
               var csr_id = ctx.CurrentItem.csr_id;
              var parentLinkHitHighlighted = Srch.U.getHighlightedProperty(csr_id, ctx.CurrentItem, "PSPersonEmail");

                if (parentLinkHitHighlighted == null)
                  {
                    parentLinkHitHighlighted = $htmlEncode(ctx.CurrentItem.PSPersonEmail);
                   }

        // Person full name
               var csr_id_fullname=ctx.CurrentItem.csr_id;

              var FullNameLinkHitHighlighted = Srch.U.getHighlightedProperty(csr_id_fullname, ctx.CurrentItem, "PSPersonPreferredFullName");

                if (FullNameLinkHitHighlighted == null)
                  {
                      FullNameLinkHitHighlighted = $htmlEncode(ctx.CurrentItem.PSPersonPreferredFullName);
                   }

              // Business unit name
               var csr_id_businessunit=ctx.CurrentItem.csr_id;

              var BusinessunitLinkHitHighlighted = Srch.U.getHighlightedProperty(csr_id_businessunit, ctx.CurrentItem, "PSPersonBusinessUnit");

                if (BusinessunitLinkHitHighlighted == null)
                  {
                    BusinessunitLinkHitHighlighted = $htmlEncode(ctx.CurrentItem.PSPersonBusinessUnit);
                   }

              //Organisation
              var has_psorganisation = !$isEmptyString(ctx.CurrentItem.PSPersonOrganisation);
              var has_mob = !$isEmptyString(ctx.CurrentItem.PSPersonMobileNumber);
              var hhProps = Srch.U.createXMLDocument("<root>" + ctx.CurrentItem.HitHighlightedProperties + "</root>");
              _#-->
            
                <div id="_#= $htmlEncode(container_id) =#_" class="ms-srch-people-outerContainer ms-srch-resultHover">

                    <a clicktype="Result" id="UserProfileRed" href="_#= encodedPath =#_" style="display: block;color:black;">

                        <div id="_#= $htmlEncode(itemId) =#_" name="Item" class="ms-srch-people-item">
                            <div id="_#= $htmlEncode(hoverId) =#_" class="ms-srch-hover-outerContainer"></div>
                            <div id="UserPersonaContainer">
                                <div id="UserPersona">
                                    <div id="_#= userPersonaId =#_"></div>
                                </div>
                            </div>


                            <div id="UserInfoContainer">

                                <div id="ContactInfo">
                                    <div id="NameField">
                                        <!--#_
                        var displayName = $htmlEncode(ctx.CurrentItem.PSPersonPreferredFullName);
                        _#-->
                                        <!--<div id="NameValue" class="ms-srch-ellipsis ms-textLarge">-->
                                        <div id="NameValue" class="ms-srch-ellipsis ms-textLarge">
                                            <div id="NameFieldLink" class="ms-srch-ellipsis" title="_#= displayName =#_">_#= FullNameLinkHitHighlighted =#_</div>
                                            <!--<a clicktype="Result" class="ms-srch-ellipsis" id="NameFieldLink" href="_#= encodedPath =#_" title="_#= displayName =#_">_#= FullNameLinkHitHighlighted =#_</a>-->
                                        </div>
                                    </div>
                                    <!--#_
                    var has_jobtitle = !$isEmptyString(ctx.CurrentItem.PSPersonJobTitle);
                    if(has_jobtitle == true) {
                    var jobTitle = ctx.CurrentItem.PSPersonJobTitle + "";
                    jobTitle = printJobTitle(jobTitle);
                    _#-->
                                    <div id="JobTitleField">
                                        <div id="JobTitleValue" class="ms-srch-ellipsis" title="_#= jobTitle =#_"> _#= jobTitle =#_ </div>
                                    </div>
                                    <!--#_
                    }
                    _#-->
                                    <!--#_
                    var has_bu = !$isEmptyString(ctx.CurrentItem.PSPersonBusinessUnit);
                    if(has_bu == true) {
                    var businessUnit = ctx.CurrentItem.PSPersonBusinessUnit;
                    businessUnit = $htmlEncode(businessUnit);
                    _#-->
                                    <!--<div id="BusinessUnitField">-->
                                    <div id="BusinessUnitField">
                                        <!--<div id="BusinessUnitValue" class="ms-srch-ellipsis" title="_#= businessUnit =#_">Business Unit: _#= businessUnit =#_ </div>-->
                                        <div id="BusinessUnitValue" class="ms-srch-ellipsis" title="_#= businessUnit =#_">Business Unit: _#= BusinessunitLinkHitHighlighted =#_ </div>
                                    </div>
                                    <!--#_
                    }
                    _#-->
                                    <!--#_

                         if(has_psorganisation == true) {
                           var organisation = ctx.CurrentItem.PSPersonOrganisation;
                           organisation = $htmlEncode(organisation);
                    _#-->
                                    <div id="OrganisationField">
                                        <div id="OrganisationValue" class="ms-srch-ellipsis" title="_#= organisation =#_">Organisation:<strong> _#= organisation =#_ </strong></div>
                                    </div>
                                    <!--#_
                        }
                    _#-->
                                    <!--#_
                    var has_lo = !$isEmptyString(ctx.CurrentItem.PSPersonLocation);
                    if(has_lo == true) {
                    var personLocation = ctx.CurrentItem.PSPersonLocation;
                    personLocation = $htmlEncode(personLocation);
                    _#-->
                                    <div id="LocationField">
                                        <div id="LocationValue" class="ms-srch-ellipsis" title="_#= personLocation =#_">Location: _#= personLocation =#_ </div>
                                    </div>
                                    <!--#_
                    }
                    _#-->

                                </div>

                            </div>

                        </div>
                    </a>
                    

                    <div id="UserInfoContainerlink">

                        <div id="ContactInfolink" style="margin-left: 90px;">
                           
                            <!--#_
            var has_email = !$isEmptyString(ctx.CurrentItem.PSPersonEmail);
            if(has_email == true) {
            var email = $htmlEncode(ctx.CurrentItem.PSPersonEmail);
            _#-->
                            <!--<div id="EmailField">
            <div class="ms-srch-ellipsis"><a href="mailto:_#= email =#_">_#= email =#_</a></div>-->
                            <div id="EmailField">
                                <div class="ms-srch-ellipsis"><a href="mailto:_#= email =#_">_#= parentLinkHitHighlighted =#_</a></div>
                            </div>

                            <!--<div id="EmailField">
                <div id="EmailFieldValue" class="ms-srch-ellipsis" title="_#= email =#_"> _#= parentLinkHitHighlighted =#_ </div>
            </div>-->
                            <!--#_
            }
            _#-->
                            <!--#_
            var has_phno = !$isEmptyString(ctx.CurrentItem.PSPersonPreferredPhone);
            if(has_phno == true) {
            var phone = $htmlEncode(ctx.CurrentItem.PSPersonPreferredPhone);
            _#-->
                            <div id="PhoneFieldlink">
                                <div id="PhoneValuelink" class="ms-srch-ellipsis" title="_#= phone =#_">Preferred phone: <a href="tel:_#= phone =#_">_#= phone =#_</a></div>
                            </div>

                            <!--<div id="PhoneField">
                <div id="PhoneValue" class="ms-srch-ellipsis" title="_#= phone =#_">Preferred phone: _#= phone =#_ </div>
            </div>-->
                            <!--#_
            }

            _#-->
                            <!--#_
                  if(has_mob == true) {
                   var encodedMobilePhone = $htmlEncode(ctx.CurrentItem.PSPersonMobileNumber);
                   var displayMobilePhone = Srch.U.getSingleHHXMLNodeValue(hhProps, "mobilephone");
                   if ($isEmptyString(displayMobilePhone)) { displayMobilePhone = encodedMobilePhone }
            _#-->
                            <div id="MobileFieldlink">
                                <div id="MobileValuelink" class="ms-srch-ellipsis" title="_#= encodedMobilePhone =#_">Mobile: <a href="tel:_#= encodedMobilePhone =#_">_#= encodedMobilePhone =#_</a></div>
                            </div>
                            <!--<div id="MobileField">
                <div id="MobileValue" class="ms-srch-ellipsis" title="_#= encodedMobilePhone =#_">Mobile: _#= encodedMobilePhone =#_ </div>
            </div>-->
                            <!--#_
            }

            _#-->

                        </div>

                    </div>
                
                 </div>
                   
                    <!--<a clicktype="Result" id="UserProfileRed" href="_#= encodedPath =#_" style="display: block;"> </a>-->
                    <!--<a clicktype="Result" id="UserProfileRed1" href="_#= encodedPath =#_" style="display: block;">-->

                        <!--<div id="_#= $htmlEncode(itemId) =#_" name="Item" class="ms-srch-people-item" onmouseover="EnsureScriptParams('SearchUI.js', 'HP.Init', event, '_#=$scriptEncode(itemId) =#_', '_#=$scriptEncode(hoverId) =#_', '_#=$scriptEncode(hoverUrl) =#_');" onmouseout="EnsureScriptParams('SearchUI.js', 'HP.Hide');">-->
                       
                    <!--</a>-->
                    <!--#_
        var uName = displayName;
        var uEmail = email;
        var uPicUrl = $urlHtmlEncode(location.protocol + '//' + location.hostname + '/userphotos/'+ ctx.CurrentItem.PSPersonId + '.jpg?renditionid=12');
        var uSip = email;

        AddPostRenderCallback(ctx, function(){
        EnsureScriptFunc("clienttemplates.js", "RenderUserFieldWorker", function() {
        var getUserPersona = function() {
        var renderCtx = new ContextInfo();
        renderCtx.Templates = {};
        renderCtx.Templates["Fields"] = {};
        var fieldSchemaData = { "PictureOnly":"1", "PictureSize": "Size_72px"};
        var listSchema = {"EffectivePresenceEnabled": "1", "PresenceAlt": Srch.Res.item_People_NoPresenceAvailable};
        var userData = {"title": uName, "email": uEmail, "picture": uPicUrl, "sip": uSip};
        var personaControlElement = document.getElementById(userPersonaId);
        if (!Srch.U.n(personaControlElement))
        {
        personaControlElement.innerHTML = RenderUserFieldWorker(renderCtx, fieldSchemaData, userData, listSchema);
        personaControlElement.innerHTML = personaControlElement.innerHTML.replace('img class', 'img onerror="this.src=\'/_layouts/15/images/person.gif?rev=23\'" class') ;
        }
        if(typeof(ctx.EnqueueImnRequest) == "undefined") { ctx.EnqueueImnRequest = false; }
        if (ctx.EnqueueImnRequest == false) {
        ctx.ClientControl.add_oneTimeResultRendered(function(){ if (typeof(ProcessImn) != "undefined") { ProcessImn(); } });
        ctx.EnqueueImnRequest = true;
        }
        };
        getUserPersona();
        });
        });_#-->
                    <!--#_
        }
        _#-->

</div>
    </body>
</html>
<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>PS Audio Item</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:ManagedPropertyMapping msdt:dt="string">&#39;Image Url&#39;{Picture URL}:&#39;PictureThumbnailURL;PictureURL;&#39;,&#39;Title&#39;,&#39;Title Link Url&#39;{Link URL}:&#39;Path&#39;,&#39;Summary&#39;{Line 2}:&#39;Description&#39;,&#39;HitHighlightedProperties&#39;,&#39;HitHighlightedSummary&#39;,&#39;FileExtension&#39;{File Extension}:&#39;SecondaryFileExtension&#39;,&#39;Author&#39;,&#39;ContentTypeId&#39;,&#39;Created&#39;,&#39;PeopleInMedia&#39;,&#39;MediaDuration&#39;,&#39;VideoFileURL&#39;{Video File URL}:&#39;UserEncodingURL;ExternalMediaURL;DefaultEncodingURL;&#39;,&#39;PSImageCaption&#39;:&#39;PSImageCaption&#39;,&#39;PSFileSize&#39;:&#39;PSFileSize&#39;,&#39;PSReuseable&#39;:&#39;PSReuseable&#39;</mso:ManagedPropertyMapping>
<mso:MasterPageDescription msdt:dt="string">Displays a result tailored for a video.</mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106603</mso:ContentTypeId>
<mso:TargetControlType msdt:dt="string">;#SearchResults;#</mso:TargetControlType>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
<mso:_dlc_DocId msdt:dt="string">OURHOUSE-1-1822</mso:_dlc_DocId>
<mso:_dlc_DocIdItemGuid msdt:dt="string">c8d6df60-bf13-4f11-ad7d-17ee7bf76751</mso:_dlc_DocIdItemGuid>
<mso:_dlc_DocIdUrl msdt:dt="string">http://ourhouse.campus.services/_layouts/15/DocIdRedir.aspx?ID=OURHOUSE-1-1822, OURHOUSE-1-1822</mso:_dlc_DocIdUrl>
<mso:HtmlDesignStatusAndPreview msdt:dt="string">http://ourhouse.campus.services/_catalogs/masterpage/Display Templates/Search/PS_Item_Audio.html, Conversion successful.</mso:HtmlDesignStatusAndPreview>
<mso:HtmlDesignConversionSucceeded msdt:dt="string">True</mso:HtmlDesignConversionSucceeded>
<mso:CrawlerXSLFile msdt:dt="string"></mso:CrawlerXSLFile>
<mso:HtmlDesignPreviewUrl msdt:dt="string"></mso:HtmlDesignPreviewUrl>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
<body>
    <div id="Item_Video">
<!--#_
var id = ctx.ClientControl.get_nextUniqueId();
var itemId = id + Srch.U.Ids.item;
var hoverId = id + Srch.U.Ids.hover; 
$setResultItem(itemId, ctx.CurrentItem);
var hoverUrl = "~sitecollection/_catalogs/masterpage/Display Templates/Search/PS_Item_Audio_HoverPanel.js";
ctx.CurrentItem.ShowDescription = false;
ctx.CurrentItem.ShowCloseButton = false;

ctx.CurrentItem.csr_FileType = "Audio";

var encodedId = $htmlEncode(id);
var templateId = encodedId + "_VideoOrganicTemplate";
var thumbnailPathId = encodedId + "_videoItemThumbnailPath";

var imageURL = $getItemValue(ctx, "Image Url");
var imageMarkup = Srch.U.getVideoImageWithFallbackSource(imageURL, 120, 68);
var titleLinkUrl = $getItemValue(ctx, "Title Link Url");
var videoFileURL = $getItemValue(ctx, "VideoFileURL");
var fileExtension = $getItemValue(ctx, "FileExtension");
var isRendition = !fileExtension.isEmpty;
if(isRendition && !videoFileURL.isEmpty)
{
    titleLinkUrl = videoFileURL;
    videoFileURL.value = unescape(videoFileURL.value);
}
titleLinkUrl.overrideValueRenderer($urlHtmlEncode);

//var truncatedUrl = Srch.U.truncateHighlightedUrl(titleLinkUrl.value, Srch.U.pathTruncationLengthWithPreview);
var truncatedUrl = Srch.U.truncateHighlightedUrl(videoFileURL.value, Srch.U.pathTruncationLengthWithPreview);

var title = Srch.U.getHighlightedProperty(id, ctx.CurrentItem, "Title");
var itemTitle = $getItemValue(ctx, "Title");
if ($isEmptyString(title)) 
{
    title = itemTitle.toString();
}

var maxTitleLengthInChars = Srch.U.titleTruncationLength;
var termsToUse = 2;
if(!imageURL.isEmpty)
{
    maxTitleLengthInChars = Srch.U.titleTruncationLengthWithPreview;
    termsToUse = 1;
}

var summaryText = null; 
var hhSummary = $getItemValue(ctx, "HitHighlightedSummary");
if(!hhSummary.isEmpty)
{
    var su = Srch.U.processHHXML(hhSummary.value);    
    summaryText = Srch.U.getTrimmedProcessedHHXMLString(su, Srch.U.summaryTruncationLengthWithPreview);
}
else
{
    var summary = $getItemValue(ctx, "Summary");
    summaryText = $htmlEncode(Srch.U.truncateEnd(summary.value, Srch.U.summaryTruncationLengthWithPreview));
}


        /**
 * Convert number of bytes into human readable format
 *
 * @param integer bytes     Number of bytes to convert
 * @param integer precision Number of digits after the decimal separator
 * @return string
 */
        function bytesToSize(bytes, precision) {
            var kilobyte = 1024;
            var megabyte = kilobyte * 1024;
            var gigabyte = megabyte * 1024;
            var terabyte = gigabyte * 1024;

            if ((bytes >= 0) && (bytes < kilobyte)) {
                return bytes + ' B';

            } else if ((bytes >= kilobyte) && (bytes < megabyte)) {
                return (bytes / kilobyte).toFixed(precision) + ' KB';

            } else if ((bytes >= megabyte) && (bytes < gigabyte)) {
                return (bytes / megabyte).toFixed(precision) + ' MB';

            } else if ((bytes >= gigabyte) && (bytes < terabyte)) {
                return (bytes / gigabyte).toFixed(precision) + ' GB';

            } else if (bytes >= terabyte) {
                return (bytes / terabyte).toFixed(precision) + ' TB';

            } else {
                return bytes + ' B';
            }
        }


var fileSize = bytesToSize(ctx.CurrentItem.PSFileSize, 1)

var resusable = $getItemValue(ctx, "PSReuseable");

var hasSummary = !$isEmptyString(summaryText);
var pathStyle = hasSummary ? "" : "display:inherit";
_#-->
        <div id="_#= $htmlEncode(itemId) =#_" name="Item" data-displaytemplate="VideoItem" class="ms-srch-item" onmouseover="_#= Srch.U.getShowHoverPanelCallback(itemId, hoverId, hoverUrl) =#_" onmouseout="_#= Srch.U.getHideHoverPanelCallback() =#_">
            <div id="_#= $htmlEncode(hoverId) =#_" class="ms-srch-hover-outerContainer"></div>
            <div id="_#= templateId =#_">
                <div class="ms-srch-video-itemthumbnail">
                    <a clicktype="Result" href="_#= ctx.CurrentItem.DefaultEncodingURL =#_" id="_#= thumbnailPathId =#_">
                        _#= imageMarkup =#_
                        <div class="ms-srch-video-playbutton ms-srch-video-playbutton-result"><span></span></div>
                    </a>
                </div>
                <div class="ms-srch-video-itemmain">
                    <div id="_#= $htmlEncode(id + Srch.U.Ids.title) =#_" class="ms-srch-item-title">
                        <h3>
                            <a clicktype="Result" id="_#= $htmlEncode(id + Srch.U.Ids.titleLink) =#_" href="_#= ctx.CurrentItem.DefaultEncodingURL =#_" class="ms-srch-item-link" title="_#= itemTitle =#_" onfocus="_#= ctx.currentItem_ShowHoverPanelCallback =#_">
                                _#= Srch.U.trimTitle(title, maxTitleLengthInChars, termsToUse) =#_
                            </a>
                        </h3>
                    </div>                    
<!--#_
    if(hasSummary)
    {
_#-->
                    <div id="_#= $htmlEncode(id + Srch.U.Ids.summary) =#_" class="ms-srch-item-summary">
                        _#= summaryText =#_
                    </div>
<!--#_
    }
_#-->              
                    <div id="_#= $htmlEncode(id + Srch.U.Ids.path) =#_" tabindex="0" class="ms-srch-item-path ms-srch-item-video-path"  style="_#= pathStyle =#_" title="_#= $htmlEncode(titleLinkUrl.value) =#_" onblur="Srch.U.restorePath(this, '_#= $scriptEncode(truncatedUrl) =#_', '_#= $scriptEncode(titleLinkUrl.value) =#_')" onclick="Srch.U.selectPath('_#= $scriptEncode(titleLinkUrl.value) =#_', this)" onkeydown="Srch.U.setPath(event, this, '_#= $scriptEncode(titleLinkUrl.value) =#_', '_#= $scriptEncode(truncatedUrl) =#_')" >
                        _#= $htmlEncode(truncatedUrl) =#_
                    </div>

					<div id="_#= $htmlEncode(encodedId + Srch.U.Ids.path) =#_" class="ms-srch-item-summary">
						Type: Audio
						<br />
						Size: _#= fileSize =#_
						<br />
						Reusable: _#= resusable =#_	
					</div>					
                </div>
            </div>
        </div> 
    </div>
</body>
</html>
